<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>Super smooth CSS animations</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/smooth.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1 class="main">Super smooth animations</h1>
				<img src="./img/logo.svg" style="width: 350px" />
			</section>
			<section data-state="has-scene">
				<h1>Expectation</h1>
			</section>
			<section data-state="has-scene has-scene--slow">
				<h1>Reality</h1>
			</section>
			<section data-background-gradient="linear-gradient(225deg, #7B4397, #DC2430)" data-background-color="#7B4397">
				<h1>Battery drain</h1>
				<div class="battery"></div>
			</section>
			<section data-background-gradient="linear-gradient(225deg, #7B4397, #DC2430)" data-background-color="#7B4397">
				<h1>Device overheating</h1>
				<div class="thermometer"></div>
			</section>
			<section data-background-image="/img/maillard.jpg">
				<h1 class="shadow">Maillard</h1>
			</section>
			<section data-background-image="/img/me.jpg" style="text-align: right; padding-top: 200px">
				<h2 class="shadow">Giacomo Zinetti</h2>
				<h3 class="shadow">@gcmznt</h3>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h1>How browser renders?</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="cycle">
					<div class="main">
						<h1 class="small">Render cycle</h1>
					</div>
					<h3 class="chevron js">JavaScript</h3>
					<h3 class="chevron style">Style</h3>
					<h3 class="chevron layout">Layout</h3>
					<h3 class="chevron paint">Paint</h3>
					<h3 class="chevron composite">Composite</h3>
				</div>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="cycle">
					<div class="main">
						<h1 class="small">Our logic</h1>
					</div>
					<h3 class="chevron js">JavaScript</h3>
					<h3 class="chevron style">Style</h3>
					<h3 class="chevron">Layout</h3>
					<h3 class="chevron">Paint</h3>
					<h3 class="chevron">Composite</h3>
				</div>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="cycle">
					<div class="main">
						<h2>
							<code>margin<br>padding</code>
						</h2>
						<p>&nbsp;</p>
						<h1 class="small">Reflow</h1>
					</div>
					<h3 class="chevron">JavaScript</h3>
					<h3 class="chevron">Style</h3>
					<h3 class="chevron layout">Layout</h3>
					<h3 class="chevron paint">Paint</h3>
					<h3 class="chevron composite">Composite</h3>
				</div>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="cycle">
					<div class="main">
						<h2>
							<code>color<br>background</code>
						</h2>
						<p>&nbsp;</p>
						<h1 class="small">Repaint</h1>
					</div>
					<h3 class="chevron">JavaScript</h3>
					<h3 class="chevron">Style</h3>
					<h3 class="chevron">Layout</h3>
					<h3 class="chevron paint">Paint</h3>
					<h3 class="chevron composite">Composite</h3>
				</div>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="cycle">
					<div class="main">
						<h2>
							<code>transform<br>opacity</code>
						</h2>
						<p>&nbsp;</p>
						<h1 class="small">Compose</h1>
					</div>
					<h3 class="chevron">JavaScript</h3>
					<h3 class="chevron">Style</h3>
					<h3 class="chevron">Layout</h3>
					<h3 class="chevron">Paint</h3>
					<h3 class="chevron composite">Composite</h3>
				</div>
			</section>
			<section data-background-gradient="linear-gradient(to right, #000854, #004E92)" data-background-color="#000854">
				<h1 class="big">CSS</h1>
			</section>
			<section data-background-gradient="linear-gradient(to right, #000854, #004E92)" data-background-color="#000854">
				<h1 class="small">Animate compositor-only properties</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="square slow">Left</div>
				<div class="square fast">Translate</div>
				<button class="button" id="work">Execute long JS task</button>
				<button class="button" id="start">Start heavy JS loop</button>
				<button class="button" id="stop">Stop heavy JS loop</button>
				<script>
					const workButton = document.getElementById('work');
					const startButton = document.getElementById('start');
					const stopButton = document.getElementById('stop');
					let heavyLoopTimeout;

					function longTask(el = 10000000) {
						console.log(el);
						new Array(el).fill(1).map((e, i) => e * i);
					}

					function heavyLoop() {
						startButton.style.display = 'none';
						stopButton.style.display = '';
						longTask(1000000);
						heavyLoopTimeout = setTimeout(heavyLoop, 16);
					}

					function heavyLoopStop() {
						startButton.style.display = '';
						stopButton.style.display = 'none';
						clearTimeout(heavyLoopTimeout)
					}

					workButton.addEventListener('click', () => longTask());
					startButton.addEventListener('click', () => heavyLoop());
					stopButton.addEventListener('click', () => heavyLoopStop());

					stopButton.style.display = 'none';
				</script>
			</section>
			<section data-background-gradient="linear-gradient(to right, #000854, #004E92)" data-background-color="#000854">
				<h1>Create layers</h1>
				<h1>
					<code>will-change</code>
				</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h2>❌</h2>
				<h3 style="text-align: left">
					<code>
* {<br>
&nbsp;&nbsp;will-change: transform;<br>
}
					</code>
				</h3>
			</section>
			<section data-background-gradient="linear-gradient(to right, #000854, #004E92)" data-background-color="#000854">
				<h1>Disable hover on scroll</h1>
				<aside class="notes">
					Scroll is an animation
				</aside>
			</section>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1 class="big">JS</h1>
			</section>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1>Avoid forced synchronous layout</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h2>❌</h2>
				<h4 style="text-align: left">
					<code>
elements.forEach(el => {<br>
&nbsp;&nbsp;el.querySelector('img').style.width<br>
&nbsp;&nbsp;&nbsp;&nbsp;= `${el.offsetWidth}px`;<br>
})
					</code>
				</h4>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h2>✅</h2>
				<h4 style="text-align: left">
					<code>
elements.forEach((el, i) => {<br>
&nbsp;&nbsp;ws[i] = el.offsetWidth;<br>
})<br>
elements.forEach((el, i) => {<br>
&nbsp;&nbsp;el.querySelector('img').style.width<br>
&nbsp;&nbsp;&nbsp;&nbsp;= `${ws[i]}px`;<br>
})
					</code>
				</h4>
			</section>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1 class="big">rAF</h1>
				<h2>requestAnimationFrame()</h2>
			</section>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1 class="big">rIC</h1>
				<h2>requestIdleCallback()</h2>
			</section>
			<aside class="notes">
				Optimistic ui
			</aside>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1>Split big tasks</h1>
			</section>
			<section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1>Web workers</h1>
			</section>
			<!-- <section data-background-gradient="linear-gradient(135deg, #E65C00, #8E0E00)" data-background-color="#8E0E00">
				<h1>Passive listener on scroll</h1>
			</section> -->
			<section data-background-image="/img/rail.jpg">
				<h1 class="shadow fragment">
					TARGET
					<br>
					<big>RAIL</big>
				</h1>
			</section>
			<section data-background-image="/img/rail.jpg">
				<h1 class="shadow small">
					<code>
Response&nbsp;<100ms<br>
Animation&nbsp;<16ms<br>
Idle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<50ms<br>
Load&nbsp;&nbsp;&nbsp;&nbsp;<1000ms<br>
				</code>
				</h1>
			</section>
			<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
				<h1 class="big">FLIP</h1>
				<h3>by @aerotwist</h3>
			</section>
			<section>
				<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
					<h1>First</h1>
					<h4 style="text-align: left">
						<code>
	const first =<br>
	&nbsp;&nbsp;el.getBoundingClientRect();
					</code>
					</h4>
				</section>
				<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
					<h1>Last</h1>
					<h4 style="text-align: left">
						<code>
	el.classList.toggle('end');<br>
	const last =<br>
	&nbsp;&nbsp;el.getBoundingClientRect();
					</code>
					</h4>
				</section>
				<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
					<h1>Invert</h1>
					<h4 style="text-align: left">
						<code>
	const invert =<br>
	&nbsp;&nbsp;first.height / last.height;
					</code>
					</h4>
				</section>
				<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
					<h1>Play</h1>
					<h4 style="text-align: left">
						<code>
	el.animate([<br>
	&nbsp;&nbsp;{ transform: `scale(${invert}px)` },<br>
	&nbsp;&nbsp;{ transform: 'scale(0)' }<br>
	], 300);
					</code>
					</h4>
					<aside class="notes">
						Content can get distorted
					</aside>
				</section>
			</section>
			<section data-background-gradient="linear-gradient(55deg, #237A57, #093028)" data-background-color="#093028">
				<h1 class="small">
					<code>First&nbsp;
					<br>Last&nbsp;&nbsp;
					<br>Invert
					<br>Play&nbsp;&nbsp;&nbsp;</code>
				</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<div class="flip-wrapper">
					<div class="flip-demo">
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
						<div>
							<div class="flip-el" tabindex="0"></div>
						</div>
					</div>
				</div>
				<script>
					Array.from(document.querySelectorAll('.flip-el')).forEach(el => {
						el.addEventListener('focus', e => flip(e.target, 'flipped'))
						el.addEventListener('blur', e => flip(e.target, 'flipped'))
					});

					function flip(el, className = 'flipped') {
						var first = el.getBoundingClientRect();

						el.classList.toggle(className);
						var last = el.getBoundingClientRect();

						var invertY = first.top - last.top;
						var invertX = first.left - last.left;
						var scaleX = first.width / last.width;
						var scaleY = first.height / last.height;

						requestAnimationFrame(function () {
							el.animate([
								{ transform: `translate(${invertX}px, ${invertY}px) scale(${scaleX}, ${scaleY})` },
								{ transform: `translate(0, 0) scale(1, 1)` }
							], 300);
						});
					};
				</script>
			</section>
			<aside class="notes">
				Animate not transitionable properties
			</aside>
			<!-- update codepen -->
			<section data-background-gradient="linear-gradient(10deg, #1C4587, #DC2430)" data-background-color="#1C4587">
				<h1>
					Content
					<br> VS
					<br> Animations
				</h1>
			</section>
			<section data-background-gradient="linear-gradient(10deg, #1C4587, #DC2430)" data-background-color="#1C4587">
				<h1 class="big">Users!</h1>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h1 class="small">The best animation is the invisible one</h1>
				<h3 class="fragment" style="margin-top: 2em">Thank you 🙏</h3>
				<aside class="notes">
					Animations like referees
				</aside>
			</section>
			<section data-background-gradient="linear-gradient(to bottom, #4D4D4D, #000)" data-background-color="#000">
				<h1>Links</h1>
				<ul>
					<li>
						<a href="https://developers.google.com/web/fundamentals/performance">Web Fundamentals: Performance</a>
					</li>
					<li>
						<a href="https://csstriggers.com/">CSS Triggers</a>
					</li>
					<li>
						<a href="https://aerotwist.com/blog/flip-your-animations/">FLIP by @aerotwist</a>
					</li>
					<li>
						<a href="https://codepen.io/collection/DxqVxK/">Examples</a>
					</li>
					<li>
						<a href="https://grusp.us5.list-manage.com/track/click?u=29d918424cd5375f4c0c54c00&id=0a61fcd972&e=a9910486bf">Feedbacks are welcome!</a>
					</li>
				</ul>
			</section>
		</div>
		<div class="scene">
			<div class="sky"></div>
			<div class="stars"></div>
			<div class="sun"></div>
			<div class="moon"></div>
			<div class="cloud"></div>
			<div class="cloud cloud--1"></div>
			<div class="cloud cloud--2"></div>
			<div class="ship">
				<img src="/img/ship.svg" class="ship-img" />
			</div>
			<div class="dolphin">
				<img src="/img/dolphin.svg" class="dolphin-img" />
			</div>
			<div class="sea sea--2"></div>
			<div class="sea"></div>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>
	<script>
		Reveal.initialize({
			history: true,
			dependencies: [
				{ src: 'plugin/markdown/marked.js' },
				{ src: 'plugin/markdown/markdown.js' },
				{ src: 'plugin/notes/notes.js', async: true },
				{ src: 'plugin/highlight/highlight.js', async: true, callback: function () { hljs.initHighlightingOnLoad(); } }
			]
		});
	</script>
</body>

</html>